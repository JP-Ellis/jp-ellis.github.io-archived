<!DOCTYPE html>
<html lang="en_au">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
    <meta name="robots" content=""/>

    <!-- Metadata -->
    <title>Submitting with&nbsp;TikZ-Feynman &ndash; Joshua Ellis</title>
<meta name="author" content="Joshua Ellis" />
<meta name="description" content="One of TikZ-Feynman’s strengths is its simple syntax which is only possible by having vertex positioned automatically by graph drawing algorithms which are implement in the Lua scripting language. As a result, LuaTeX is required to compile documents that use TikZ-Feynman. Although LuaTeX is intended to supplant pdfTeX, the latter remains the standard when it comes to submitting to journals and the arXiv. Fortunately, there is a way to both use TikZ-Feynman and still submit to journals as long as they use a version of TikZ released after 2013." />
<meta name="keywords" content="">
<meta property="og:type" content="article"/>
<meta property="og:site_name" content="Joshua Ellis"/>
<meta property="og:title" content="Submitting with&nbsp;TikZ-Feynman"/>
<meta property="og:description" content="One of TikZ-Feynman’s strengths is its simple syntax which is only possible by having vertex positioned automatically by graph drawing algorithms which are implement in the Lua scripting language. As a result, LuaTeX is required to compile documents that use TikZ-Feynman. Although LuaTeX is intended to supplant pdfTeX, the latter remains the standard when it comes to submitting to journals and the arXiv. Fortunately, there is a way to both use TikZ-Feynman and still submit to journals as long as they use a version of TikZ released after 2013."/>
<meta property="og:url" content="https://jpellis.me/projects/tikz-feynman/submitting-with-tikz-feynman/"/>
<meta property="og:locale" content="en_AU"/>
<meta property="article:author" content="https://jpellis.me/author/joshua-ellis/">
<meta property="article:modified_time" content=""/>
<meta property="article:published_time" content="2015-01-26 00:00:00+11:00"/>
<meta property="article:section" content="tikz-feynman"/>

<!-- icons and bar theme -->
<meta name="theme-color" content="#D43400">
<link id="favicon" rel="shortcut icon" href="https://jpellis.me/theme/images/favicon-16.png" sizes="16x16">
<link id="favicon" rel="shortcut icon" href="https://jpellis.me/theme/images/favicon-32.png" sizes="32x32">
<link id="favicon" rel="shortcut icon" href="https://jpellis.me/theme/images/favicon-64.png" sizes="64x64">
<link id="favicon" rel="shortcut icon" href="https://jpellis.me/theme/images/favicon-128.png" sizes="128x128">
<link id="favicon" rel="shortcut icon" href="https://jpellis.me/theme/images/favicon-256.png" sizes="256x256"><!-- CSS Stylesheets -->
<link rel="stylesheet" type="text/css" href="https://jpellis.me/theme/css/style.min.css">
<!-- Share button -->
<link rel="stylesheet" type="text/css" href="https://jpellis.me/theme/css/share-button.min.css">
<script type="text/javascript" src="https://jpellis.me/theme/js/share-button.min.js"></script><!-- Feeds -->
<link href="https://jpellis.me/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Joshua Ellis Atom">
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>  </head>
  <body unresolved>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-M7H67J"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M7H67J');</script>
<!-- End Google Tag Manager -->
    <aside>
<a href="https://jpellis.me">
  <img src="https://jpellis.me/theme/images/profile.webp" alt="Joshua Ellis" title="Joshua Ellis">
</a>
<h1><a href="https://jpellis.me">Joshua Ellis</a></h1>
<p>PhD Candidate</p>
<nav>
  <ul class="pages">
    <li><a href="https://jpellis.me/about/#about">About</a></li>
    <li><a href="https://jpellis.me/projects/#projects">Projects</a></li>
    <li><a href="https://jpellis.me/CV/JoshuaEllis-web.pdf" target="_blank">Curriculum Vitae</a></li>
  </ul>
</nav>
<ul class="social">
  <li><a class="github" href="https://github.com/JP-Ellis" target="_blank"><i>Github</i></a></li>
  <li><a class="email" href="mailto:josh@jpellis.me" target="_blank"><i>Email</i></a></li>
  <li><a class="linkedin" href="https://au.linkedin.com/in/joshuapellis" target="_blank"><i>LinkedIn</i></a></li>
</ul>
<ul class="feeds">
  <a href="https://jpellis.me/feeds/all.atom.xml">Atom</a>
  <a href="https://jpellis.me/sitemap.xml">Sitemap</a>
</ul>    </aside>
    <div class="content">
      <nav>
        <ul>
          <li class="home"><a href="https://jpellis.me">Home</a></li>
<li class="inter"><a href="https://jpellis.me/projects/">Projects</a></li>
<li class="inter"><a href="https://jpellis.me/projects/tikz-feynman/">TikZ-Feynman</a></li>
<li class="active">Submitting with&nbsp;TikZ-Feynman</li>
        </ul>
      </nav>
      <main>
<article>
  <header>
    <div class="header-left">
      <h1 id="submitting-with-tikz-feynman">Submitting with&nbsp;TikZ-Feynman</h1>
      <span class="article-date">Posted on Mon 26 January 2015</span>
    </div>
    <share-button class="btn btn-primary"></share-button>
    <script>new ShareButton({ui: {flyout: "top left"}, networks: {pinterest: {enabled: false}}});</script>
  </header>
  <div class="content">
    <p>One of Ti<em>k</em>Z-Feynman&#8217;s strengths is its simple syntax which is only possible by
having vertex positioned automatically
by <a href="https://en.wikipedia.org/wiki/Graph_drawing">graph drawing</a> algorithms which
are implement in the <a href="http://www.lua.org/">Lua</a> scripting language.  As a
result, LuaTeX is required to compile documents that use Ti<em>k</em>Z-Feynman.
Although LuaTeX is intended to supplant pdfTeX, the latter remains the standard
when it comes to submitting to journals and the arXiv.  Fortunately, there is a
way to both use TikZ-Feynman and still submit to journals as long as they use a
version of Ti<em>k</em>Z released after&nbsp;2013.</p>


<p><strong>Note:</strong> <em>Since TikZ-Feynman was released recently, it will not yet be
installed on most TeX distributions and I provide instructions at the bottom of
this post detailing how it can be bundled easily.  Regarding arXiv in
particular, they have not updated their LaTeX packages in the past five years.
As a result, they are using a version of TikZ that is incompatible with
TikZ-Feynman.  Hopefully this will be fixed in the next few&nbsp;months.</em></p>
<p>There exists a large class of graph drawing algorithms which automatically
determine the placement of vertices in a graph.  Simple graph drawing algorithms
can be implemented in pure TeX but they are not powerful enough to be produce
Feynman diagrams; on the other hand, more
complex
<a href="https://en.wikipedia.org/wiki/Force-directed_graph_drawing">force-based</a>
algorithms quickly become too complex to be practical to implement purely in
TeX.  In order to implement these more complex graph drawing algorithms into
<span class="caps">PGF</span>/Ti<em>k</em>Z, Jannis Pohlmann used the Lua_ scripting language<sup id="fnref:pohlmann"><a class="footnote-ref" href="#fn:pohlmann">1</a></sup> which
has native support provided through the LuaTeX&nbsp;engine.</p>
<p>Although LuaTeX is now considered stable and has been shipped with every TeXLive
distribution <a href="http://www.luatex.org/roadmap.html">since 2009</a>, they have not
reached version 1.0 yet.  As a result, most journals are reluctant to use LuaTeX
and the
arXiv
<a href="https://arxiv.org/help/submit_tex">does not</a> <a href="https://arxiv.org/help/faq/mistakes">support LuaTeX</a> either.
Hopefully this will all change when LuaTeX reaches version 1.0 but until then,
submitting to these journals or the arXiv can still be achieved by externalizing
the&nbsp;diagrams.</p>
<p>If you just want to know what you need to add to the preamble to make it work,
here is the code (for Linux and probably <span class="caps">OS</span> X).  You will need to initially
compile with <code>-shell-escape</code> and when submitting to the arXiv or a journal,
make sure to include every <code>.pdf</code> and <code>.md5</code> file inside the <code>pgf-img</code>
directory on submission.  For more details as to how this works, read&nbsp;on.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">%% After having loaded `tikz` or `tikz-feynman`</span>
<span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>
<span class="k">\immediate\write</span>18<span class="nb">{</span>mkdir -p pgf-img<span class="nb">}</span>
<span class="k">\tikzexternalize</span>[
  prefix=pgf-img/,
  system call=<span class="nb">{</span>
    lualatex <span class="k">\tikzexternalcheckshellescape</span> -halt-on-error -interaction=batchmode -jobname=&quot;<span class="k">\image</span>&quot; &quot;<span class="k">\texsource</span>&quot; || rm &quot;<span class="k">\image</span>.pdf&quot;
  <span class="nb">}</span>,
]
</pre></div>
</td></tr></table>

<p>Note that errors relating to a particular image will be stored inside that
images&#8217; <code>.log</code> file inside the <code>pgf-img</code> subdirectory (usually, just look
for any <code>.log</code> file which doesn&#8217;t have an accompanying <code>.pdf</code>).</p>
<h1>The&nbsp;Basics</h1>
<p>Ti<em>k</em>Z diagrams can become very complex which can result in very long
compilation times.  To alleviate this, Feuersänger developed the externalization
library (<a
href="http://ctan.unsw.edu.au/graphics/pgf/base/doc/pgfmanual.pdf#nameddest=Externalization
Library">§50, <span class="caps">PGF</span>/Ti<i>k</i>Z manual</a>) which compiles the diagrams
separately.  In particular, this library can used to to ensure that the LuaTeX
engine is used regardless of what is generating the initial document.  The most
minimal way to load the externalization library is as&nbsp;follows:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>             <span class="c">%% Load the `external` library</span>
<span class="k">\tikzexternalize</span>                      <span class="c">%% Activate externalization</span>
</pre></div>
</td></tr></table>

<p>By default, the externalization library uses the same TeX engine to generate
diagrams as the one used to generate the main document.  We can override this by
specifying the system call to&nbsp;use:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>             <span class="c">%% Load the `external` library</span>
<span class="k">\tikzexternalize</span>[                     <span class="c">%% Activate externalization</span>
  system call=<span class="nb">{</span>                       <span class="c">%% Use lualatex in system call</span>
    lualatex <span class="k">\tikzexternalcheckshellescape</span> -halt-on-error -interaction=batchmode -jobname=&quot;<span class="k">\image</span>&quot; &quot;<span class="k">\texsource</span>&quot;
  <span class="nb">}</span>,
]
</pre></div>
</td></tr></table>

<p>This is the minimal configuration that will ensure Ti<em>k</em>Z-Feynman works, even if
you don&#8217;t compile with the LuaTeX engine.  The disadvantage now is that the
directory will be cluttered with four new file <em>for each diagram</em>.  Combined
with all the other temporary files TeX generates, it can become quite
cumbersome.  (For example, the documentation for Ti<em>k</em>Z-Feynman contains over 60
diagrams which will result in over 240 additional&nbsp;files!)</p>
<p>To make the clutter more manageable, we can make sure that the externalization
library places all these extra files in a subdirectory.  Let&#8217;s call that
<code>pgf-img</code> since it will contain all images powered by <span class="caps">PGF</span>.  To ensure that the
externalization library places files inside <code>pgf-img</code>, we need to prefix each
filename with <code>pgf-img/</code>.</p>
<p>In addition to prefixing the filenames, we also need to make sure that the
<code>pgf-img</code> directory exists beforehand, and ideally this should also be
automated.  Fortunately, TeX actually allows system calls directly from the file
through the <code>\write18</code> command.  This will require <code>-shell-escape</code> to be
used with <code>pdflatex</code> or whatever program you are compiling the master TeX file&nbsp;with.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>             <span class="c">%% Load the `external` library</span>
<span class="k">\immediate\write</span>18<span class="nb">{</span>mkdir -p pgf-img<span class="nb">}</span>  <span class="c">%% Create `pgf-img` directory</span>
<span class="k">\tikzexternalize</span>[                     <span class="c">%% Activate externalization</span>
  prefix=pgf-img/,                    <span class="c">%% Avoid cluttering the directory</span>
  system call=<span class="nb">{</span>                       <span class="c">%% Use lualatex in system call</span>
    lualatex <span class="k">\tikzexternalcheckshellescape</span> -halt-on-error -interaction=batchmode -jobname=&quot;<span class="k">\image</span>&quot; &quot;<span class="k">\texsource</span>&quot;
  <span class="nb">}</span>,
]
</pre></div>
</td></tr></table>

<p>At this stage, the above snippet of code will work most of the time but
occasionally you&#8217;ll find that it fails to compile&#8212;-usually after the
previous build was aborted.  This is due to the <span class="caps">PDF</span> from the previous run being
left in a corrupt state and then subsequent runs trying and failing to read the
corrupt <span class="caps">PDF</span>.  The fix for this is the delete the corrupt <span class="caps">PDF</span> file whenever
something goes wrong.  In <code>sh</code>, it is possible to run a program if the
previous one failed by using the <em><span class="caps">OR</span></em> operator <code>||</code> (you may have to scroll to
view the&nbsp;change):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>             <span class="c">%% Load the `external` library</span>
<span class="k">\immediate\write</span>18<span class="nb">{</span>mkdir -p pgf-img<span class="nb">}</span>  <span class="c">%% Create `pgf-img` directory</span>
<span class="k">\tikzexternalize</span>[                     <span class="c">%% Activate externalization</span>
  prefix=pgf-img/,                    <span class="c">%% Avoid cluttering the directory</span>
  system call=<span class="nb">{</span>                       <span class="c">%% Use lualatex in system call</span>
    lualatex <span class="k">\tikzexternalcheckshellescape</span> -halt-on-error -interaction=batchmode -jobname=&quot;<span class="k">\image</span>&quot; &quot;<span class="k">\texsource</span>&quot;  || rm &quot;<span class="k">\image</span>.pdf&quot;
  <span class="nb">}</span>,
]
</pre></div>
</td></tr></table>

<p>When you call you TeX engine of preference, you should see that LuaLaTeX is
invoked whenever it encounters a Ti<em>k</em>Z picture.  The <code>pgf-img</code> directory will
be populated with a <code>.dpth</code>, <code>.log</code>, <code>.md5</code> and <code>.pdf</code> file for each
picture.  The <code>.pdf</code> contains the generated picture and the <code>.md5</code> contains
a hash that is used to check whether the <span class="caps">PDF</span> needs to be regenerated (and if it
is missing, the <span class="caps">PDF</span> is always regenerated); the other two extensions are only
temporary&nbsp;files.</p>
<p>When submitting the source file, you will have to include the <code>.md5</code> and
<code>.pdf</code> files so when they compile your document, their system will simply
import the pre-generated <code>.pdf</code> instead of trying to generate them&nbsp;again.</p>
<h1>Speeding It&nbsp;Up</h1>
<p>Each time a Ti<em>k</em>Z picture is encountered, LuaLaTeX is dispatched to generate
the <span class="caps">PDF</span>.  To do this, LuaLaTeX load all the packages in your preamble, the fonts
your document uses and various other system files which significantly lengthen
how much time it takes to compile the master document if it has to generate new
pictures.  Fortunately, subsequent runs will be faster and in many cases this is
not an&nbsp;issue.</p>
<p>There is no getting around the load time of LuaLaTeX (which only becomes an
issue when it needs to be loaded many times), so the only way to speed up
compilation is to run LuaLaTeX in parallel.  The externalization library has, as
one of its options, the possibility of creating a makefile which needs to be
executed separately and parallelizing a makefile is really easy.  First we need
to instruct the externalization library to generate this&nbsp;makefile:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\usetikzlibrary</span><span class="nb">{</span>external<span class="nb">}</span>             <span class="c">%% Load the `external` library</span>
<span class="k">\immediate\write</span>18<span class="nb">{</span>mkdir -p pgf-img<span class="nb">}</span>  <span class="c">%% Create `pgf-img` directory</span>
<span class="k">\tikzexternalize</span>[                     <span class="c">%% Activate externalization</span>
  prefix=pgf-img/,                    <span class="c">%% Avoid cluttering the directory</span>
  mode=list and make,                 <span class="c">%% Generate a makefile to run later</span>
  system call=<span class="nb">{</span>                       <span class="c">%% Use lualatex in system call</span>
    lualatex <span class="k">\tikzexternalcheckshellescape</span> -halt-on-error -interaction=batchmode -jobname=&quot;<span class="k">\image</span>&quot; &quot;<span class="k">\texsource</span>&quot;  || rm &quot;<span class="k">\image</span>.pdf&quot;
  <span class="nb">}</span>,
]
</pre></div>
</td></tr></table>

<p>After processing the master TeX file, a new <code>&lt;name&gt;.makefile</code> is generated and
can be executed&nbsp;with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>make -j <span class="m">4</span> -f &lt;name&gt;.makefile
</pre></div>
</td></tr></table>

<p>The <code>-j 4</code> option instructs <code>make</code> to run at most four tasks in parallel and
<code>-f</code> tells <code>make</code> which file to read (by default, it searches for
<code>./makefile</code> or <code>./Makefile</code>).</p>
<p>Finally, I use LatexMk in order to compile TeX files because it will
automatically run all the extra steps for bibliographies, indices, and for
changed references.  By default, it isn&#8217;t configured to handle Ti<em>k</em>Z&#8217;s
makefiles by this can be fixed by adding the following to <code>~/.latexmkrc</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Adapted from http://tex.stackexchange.com/a/145878/26980</span>
<span class="c1"># Add a few files to cleanup</span>
<span class="nb">push</span> <span class="nv">@generated_exts</span><span class="p">,</span> <span class="s">&#39;figlist&#39;</span><span class="p">,</span> <span class="s">&#39;ist&#39;</span><span class="p">,</span> <span class="s">&#39;makefile&#39;</span><span class="p">,</span> <span class="s">&#39;unq&#39;</span><span class="p">;</span>
<span class="c1"># On the initial run, %tikzexternalflag is set to an empty list (when</span>
<span class="c1"># it reads this .latexmkrc).</span>
<span class="c1">#</span>
<span class="c1"># %tikzexternalflag is then set after successfully running make.</span>

<span class="k">our</span> <span class="nv">%tikzexternalflag</span> <span class="o">=</span> <span class="p">();</span>

<span class="nv">$pdflatex</span> <span class="o">=</span> <span class="s">&#39;internal tikzpdflatex -shell-escape -synctex=1 %O %S %B&#39;</span><span class="p">;</span>

<span class="k">sub</span> <span class="nf">tikzpdflatex</span> <span class="p">{</span>
    <span class="k">our</span> <span class="nv">%externalflag</span><span class="p">;</span>
    <span class="k">my</span> <span class="nv">$n</span> <span class="o">=</span> <span class="nb">scalar</span><span class="p">(</span><span class="nv">@_</span><span class="p">);</span>
    <span class="k">my</span> <span class="nv">@args</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">[</span><span class="mi">0</span> <span class="o">..</span> <span class="nv">$n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">];</span>
    <span class="k">my</span> <span class="nv">$base</span> <span class="o">=</span> <span class="nv">$_</span><span class="p">[</span><span class="nv">$n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>

    <span class="nb">system</span> <span class="s">&#39;lualatex&#39;</span><span class="p">,</span> <span class="nv">@args</span><span class="p">;</span>
    <span class="c1"># Exit with error on failure</span>
    <span class="k">if</span> <span class="p">(</span><span class="vg">$?</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="vg">$?</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">defined</span> <span class="nv">$externalflag</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$base</span><span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$externalflag</span><span class="o">-&gt;</span><span class="p">{</span><span class="nv">$base</span><span class="p">}</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;$base.makefile&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nb">system</span> <span class="p">(</span><span class="s">&quot;$make -j5 -f $base.makefile&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="vg">$?</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Depending on your computer and your preferences, you may wish to replace
<code>'lualatex'</code> with whatever engine you prefer on line 18; and you may wish to
replace <code>-j5</code> on line 27 with a smaller number if you computer has fewer cores
(I have it set to be one more than the number of cores I&nbsp;have).</p>
<p>To compile the document, you now need to run <code>latexmk &lt;name&gt;.tex</code> once and
everything should work fine.<sup id="fnref:latexmk"><a class="footnote-ref" href="#fn:latexmk">2</a></sup>_</p>
<h1>Bundling&nbsp;TikZ-Feynman</h1>
<p>If the journal your are submitting to is using a version of Ti<em>k</em>Z released
after 2013 and they are only missing Ti<em>k</em>Z-Feynman, then you can quite easily
bundle Ti<em>k</em>Z-Feynman along with your submission.  Firstly, you will need to
obtain the appropriate version
from <a href="https://github.com/JP-Ellis/tikz-feynman/releases">Github</a> and copy the
needed files to the same directory as your TeX master file.  This can be all
achieved&nbsp;with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>wget https://github.com/JP-Ellis/tikz-feynman/archive/v1.0.0.tar.gz -O - <span class="p">|</span> tar -xz
mv tikz-feynman-1.0.0/*.code.tex tikz-feynman-1.0.0/*.sty tikz-feynman-1.0.0/*.lua .
rm -rvf tikz-feynman-1.0.0
</pre></div>
</td></tr></table>

<p>Next, you need to prepare your submission to journal as usual and make sure that
all images in <code>pgf-img/</code> are up to date.  Assuming that your master file
consists of only TeX files, then you can create a tarball with everything in it&nbsp;with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>tar -cavf submission.tar *.tex *.sty pgf-img/
</pre></div>
</td></tr></table>

<p>Of course if you have extra dependencies, you will need to adapt the above
command to suit your&nbsp;needs.</p>
<p>The arXiv, unfortunately, has not updated their LaTeX packages in the past five
years and they are using a version of Ti<em>k</em>Z that is incompatible with
Ti<em>k</em>Z-Feynman.  They
have <a href="https://arxiv.org/help/faq/mistakes">announced an upgrade</a>, but until that
is complete, submission to the arXiv with Ti<em>k</em>Z-Feynman will require you to ask
permission to submit the <span class="caps">PDF</span>&nbsp;only.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:pohlmann">
<p>J. Pohlmann,
<a href="http://www.tcs.uni-luebeck.de/downloads/papers/2011/2011-configurable-graph-drawing-algorithms-jannis-pohlmann.pdf">Configurable graph drawing algorithms for the TikZ graphics description language</a>,
Masters thesis (Institute of Theoretical Computer Science, Universität zu
Lübeck, Lübeck, Germany, 2011).&#160;<a class="footnote-backref" href="#fnref:pohlmann" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:latexmk">
<p>Note that on the very first run, LatexMk won&#8217;t actually recompile
the master TeX file after having generated the pictures.  This occurs only
on the very first run.&#160;<a class="footnote-backref" href="#fnref:latexmk" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
  </div>
<div id="disqus_thread"></div>
<script>
 var disqus_config = function () {
   this.page.url = "https://jpellis.me/projects/tikz-feynman/submitting-with-tikz-feynman/";
   this.page.identifier = "2015-01-26-submitting-with-tikz-feynman";
 };
 (function() {
   var d = document, s = d.createElement('script');
   s.src = '//jpellisgithubio.disqus.com/embed.js';
   s.setAttribute('data-timestamp', +new Date());
   (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>      </main>
      <footer>
<p>
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png"/>
  </a>
  &copy; Joshua Ellis  &ndash;
  This work is licensed under an <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
    Attribution-ShareAlike 4.0 International License
  </a>
</p><p>
  Built using <a href="http://getpelican.com" target="_blank">Pelican</a>
  &ndash;
  Theme by <a href="http://jp-ellis.github.io" target="_blank">Joshua Ellis</a>
</p>      </footer>
    </div>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "Submitting with&nbsp;TikZ-Feynman",
  "headline": "Submitting with&nbsp;TikZ-Feynman",
  "datePublished": "2015-01-26 00:00:00+11:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Joshua Ellis",
    "url": "https://jpellis.me/author/joshua-ellis/"
  },
  "image": "",
  "url": "https://jpellis.me/projects/tikz-feynman/submitting-with-tikz-feynman/",
  "description": "One of TikZ-Feynman’s strengths is its simple syntax which is only possible by having vertex positioned automatically by graph drawing algorithms which are implement in the Lua scripting language. As a result, LuaTeX is required to compile documents that use TikZ-Feynman. Although LuaTeX is intended to supplant pdfTeX, the latter remains the standard when it comes to submitting to journals and the arXiv. Fortunately, there is a way to both use TikZ-Feynman and still submit to journals as long as they use a version of TikZ released after 2013."
}
</script>
  </body>
</html>